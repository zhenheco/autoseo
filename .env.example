# ⚠️ SECURITY WARNING ⚠️
# NEVER commit actual keys to git repository!
# This file is for example purposes only
# Copy this file to .env.local and fill with your actual values

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
# ⚠️ CRITICAL: Service Role Key should NEVER be exposed in client-side code or git
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-never-commit-this

# ========================================
# N8N Workflow 整合
# ========================================
# N8N Webhook 基礎 URL（如果每個網站有不同 workflow，可在資料庫設定）
N8N_WEBHOOK_BASE_URL=https://your-n8n-instance.com/webhook/article-generation

# N8N API Key（用於驗證 webhook 請求）
# 生成方式: openssl rand -hex 32
N8N_API_KEY=generate_a_random_string_do_not_use_example

# 藍新金流 (NewebPay)
NEWEBPAY_MERCHANT_ID=your-merchant-id
NEWEBPAY_HASH_KEY=your-hash-key-never-commit
NEWEBPAY_HASH_IV=your-hash-iv-never-commit
NEWEBPAY_API_URL=https://ccore.newebpay.com/MPG/mpg_gateway
NEWEBPAY_PERIOD_API_URL=https://ccore.newebpay.com/MPG/period
NEWEBPAY_RETURN_URL=https://your-domain.com/api/payment/callback
NEWEBPAY_NOTIFY_URL=https://your-domain.com/api/payment/notify
NEWEBPAY_CLIENT_BACK_URL=https://your-domain.com/dashboard/billing
NEWEBPAY_RECURRING_RETURN_URL=https://your-domain.com/api/payment/recurring/callback
NEWEBPAY_RECURRING_NOTIFY_URL=https://your-domain.com/api/payment/recurring/notify
NEWEBPAY_RECURRING_BACK_URL=https://your-domain.com/dashboard/billing

# ========================================
# GitHub Actions Integration (新增 - 避免 Vercel 超時)
# ========================================
# 啟用 GitHub Actions 處理長時間任務
USE_GITHUB_ACTIONS=false

# GitHub Personal Access Token
# 創建步驟：
# 1. GitHub → Settings → Developer settings → Personal access tokens
# 2. Generate new token (classic)
# 3. 勾選 repo 和 workflow 權限
# 4. 複製 token（只顯示一次！）
GITHUB_PERSONAL_ACCESS_TOKEN=ghp_replace_with_your_token

# ========================================
# AI 服務 API Keys
# ========================================
# DeepSeek 官方 API Key（用於文字處理：deepseek-reasoner, deepseek-chat）
# 申請地址: https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=sk-replace-with-your-key
# 自訂 API Base URL (可選，用於代理或鏡像)
# DEEPSEEK_API_BASE_URL=https://api.deepseek.com

# OpenAI 官方 API Key（用於圖片生成：gpt-image-1-mini）
# 申請地址: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-replace-with-your-key
# 自訂 API Base URL (可選，用於代理或鏡像)
# OPENAI_API_BASE_URL=https://api.openai.com/v1

# Perplexity API Key（用於付費方案的深度搜尋研究）
# 申請地址: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=pplx-replace-with-your-key
# 自訂 API Base URL (可選，用於代理或鏡像)
# PERPLEXITY_API_BASE_URL=https://api.perplexity.ai

# Brave Search API Key（用於 FREE plan 的基礎搜尋）
# 免費額度：2000 次查詢/月
# 申請地址: https://brave.com/search/api/
BRAVE_SEARCH_API_KEY=BSA-replace-with-your-key

# Gemini API Key（用於精選圖片生成：gemini-3-pro-image-preview）
# 申請地址: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=replace-with-your-gemini-key

# ========================================
# Cloudflare AI Gateway（API 成本監控與快取）
# ========================================
# 設定步驟：
# 1. 前往 Cloudflare Dashboard > AI > AI Gateway
# 2. 建立新的 Gateway
# 3. Account ID 在 Dashboard 右側欄可找到
# 4. Gateway ID 就是你建立的 Gateway 名稱
# 5. 如果啟用認證，需要建立 API Token
CF_AI_GATEWAY_ACCOUNT_ID=your_account_id
CF_AI_GATEWAY_ID=your_gateway_name
CF_AI_GATEWAY_TOKEN=your_api_token_if_auth_enabled
CF_AI_GATEWAY_ENABLED=false

# ========================================
# 多 Agent 文章生成架構 (Multi-Agent Architecture)
# ========================================
# 啟用多 Agent 架構（預設關閉，漸進式部署）
USE_MULTI_AGENT_ARCHITECTURE=false

# A/B 測試流量分配百分比 (0-100)
# 0 = 全部使用舊架構
# 100 = 全部使用新架構
# 建議部署順序: 0 -> 10 -> 50 -> 100
MULTI_AGENT_ROLLOUT_PERCENTAGE=0

# Agent 重試配置（可選，有預設值）
AGENT_RETRY_MAX_ATTEMPTS=3
AGENT_RETRY_INITIAL_DELAY_MS=1000
AGENT_RETRY_MAX_DELAY_MS=30000

# 錯誤追蹤（可選）
ERROR_TRACKING_ENABLED=false
# SENTRY_DSN=https://your-sentry-dsn.ingest.sentry.io/project-id

# WordPress 整合（用於測試文章發布）
WORDPRESS_URL=https://your-wordpress-site.com
WORDPRESS_USERNAME=your-username
WORDPRESS_APP_PASSWORD=replace-with-app-password

# Cloudflare R2 Storage (圖片儲存)
# 如何取得這些值：
# 1. 前往 Cloudflare Dashboard > R2
# 2. 建立 R2 bucket
# 3. 設定公開存取（Settings > Public Access > Allow Access）
# 4. 前往 Account > R2 > Manage R2 API Tokens
# 5. 建立 API Token 並取得 Access Key ID 和 Secret Access Key
# 6. Account ID 在 Cloudflare Dashboard 右上角可找到
R2_ACCOUNT_ID=your_account_id
R2_ACCESS_KEY_ID=your_access_key
R2_SECRET_ACCESS_KEY=your_secret_key
R2_BUCKET_NAME=your_bucket_name

# Supabase Storage (Fallback 圖片儲存)
# 如果 R2 上傳失敗，會自動使用 Supabase Storage
# 1. 前往 Supabase Dashboard > Storage
# 2. 建立 bucket (預設名稱: article-images)
# 3. 設定 Public bucket (允許公開讀取)
SUPABASE_STORAGE_BUCKET=article-images

# ========================================
# Google Analytics 4 與 Search Console 整合
# ========================================
# GA4 Measurement ID（前端追蹤用）
# 取得方式：GA4 > Admin > Data Streams > Web > Measurement ID
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Google OAuth 2.0 憑證
# 設定步驟：
# 1. 前往 https://console.cloud.google.com/
# 2. 啟用 Google Search Console API 和 Google Analytics Data API
# 3. 設定 OAuth 同意畫面（External）
# 4. 建立 OAuth 2.0 Client ID (Web application)
# 5. 設定重新導向 URI: https://your-domain.com/api/google/oauth/callback
GOOGLE_OAUTH_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_OAUTH_CLIENT_SECRET=GOCSPX-your-client-secret
GOOGLE_OAUTH_REDIRECT_URI=https://your-domain.com/api/google/oauth/callback

# Token 加密金鑰（用於加密儲存 OAuth tokens）
# 生成方式: openssl rand -hex 32
# ⚠️ 重要：一旦設定後請勿更改，否則無法解密現有 tokens
GOOGLE_TOKEN_ENCRYPTION_KEY=your-64-char-hex-key-generated-by-openssl

# ⚠️ 已棄用：Google Drive OAuth (已遷移至 R2)
# GOOGLE_DRIVE_CLIENT_ID=xxx.apps.googleusercontent.com
# GOOGLE_DRIVE_CLIENT_SECRET=GOCSPX-xxx
# GOOGLE_DRIVE_REFRESH_TOKEN=1//xxx-refresh-token
# GOOGLE_DRIVE_FOLDER_ID=your-folder-id

# App 設定
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_SITE_URL=http://localhost:3000
NEXT_PUBLIC_ALLOWED_DOMAINS=example.com,www.example.com
NEXT_PUBLIC_CNAME_TARGET=cname.your-platform.com
COMPANY_NAME=Auto Pilot SEO

# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/database
SUPABASE_DB_URL=postgresql://postgres:password@localhost:5432/database

# Email Configuration (Gmail)
GMAIL_USER=your-email@gmail.com
GMAIL_APP_PASSWORD=your-gmail-app-password

# Security
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=generate-a-secure-random-string

# ========================================
# Admin 權限設定
# ========================================
# Admin email 白名單（逗號分隔多個 email）
# 用於 /api/admin/* 端點的權限檢查
ADMIN_EMAILS=admin@example.com,another-admin@example.com

# Super Admin 白名單（逗號分隔多個 email）
# 用於管理後台存取權限（提領審核、聯盟管理等）
SUPER_ADMIN_EMAILS=admin@example.com
NEXT_PUBLIC_SUPER_ADMIN_EMAILS=admin@example.com

# ========================================
# Rate Limiting (Vercel KV)
# ========================================
# 透過 Vercel Dashboard 啟用 KV Storage 後自動設定
# 步驟：Vercel Dashboard → Project → Storage → Create Database → KV
# 連接專案後，以下變數會自動設定
# KV_REST_API_URL=自動設定
# KV_REST_API_TOKEN=自動設定

# Vercel Cron Job 認證（可選，建議在 production 環境啟用）
# 生成方式: openssl rand -hex 32
# 在 Vercel Dashboard > Settings > Environment Variables 設定
CRON_SECRET=generate_a_random_string_for_cron_authentication

# Node Environment
NODE_ENV=development