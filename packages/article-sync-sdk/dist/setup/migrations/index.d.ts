/**
 * @1wayseo/article-sync-sdk/migrations
 * 資料庫 Migration
 */
/**
 * synced_articles 表的 Migration SQL
 */
declare const SYNCED_ARTICLES_MIGRATION = "\n-- =============================================\n-- Migration: synced_articles\n-- \u540C\u6B65\u6587\u7AE0\u8868\uFF08\u4F9B\u5916\u90E8\u5C08\u6848\u4F7F\u7528\uFF09\n-- \u4F86\u81EA @1wayseo/article-sync-sdk\n-- =============================================\n\n-- \u5275\u5EFA synced_articles \u8868\nCREATE TABLE IF NOT EXISTS synced_articles (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n\n  -- \u4F86\u6E90\u8B58\u5225\n  source_id TEXT NOT NULL UNIQUE,        -- 1waySEO \u7684 article ID\n  slug TEXT NOT NULL,\n\n  -- \u5167\u5BB9\n  title TEXT NOT NULL,\n  excerpt TEXT,\n  html_content TEXT,\n  markdown_content TEXT,\n\n  -- \u5206\u985E\u548C\u6A19\u7C64\n  categories TEXT[] DEFAULT '{}',\n  tags TEXT[] DEFAULT '{}',\n\n  -- \u591A\u8A9E\u7CFB\n  language TEXT NOT NULL DEFAULT 'zh-TW',\n\n  -- SEO\n  seo_title TEXT,\n  seo_description TEXT,\n  focus_keyword TEXT,\n  keywords TEXT[] DEFAULT '{}',\n\n  -- \u5A92\u9AD4\n  featured_image_url TEXT,\n  featured_image_alt TEXT,\n\n  -- \u95B1\u8B80\u8CC7\u8A0A\n  word_count INTEGER,\n  reading_time INTEGER,\n\n  -- \u6642\u9593\u6233\u8A18\n  published_at TIMESTAMPTZ,\n  synced_at TIMESTAMPTZ DEFAULT NOW(),\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW(),\n\n  -- \u540C\u6B65\u72C0\u614B\n  sync_status TEXT DEFAULT 'active' CHECK (sync_status IN ('active', 'deleted'))\n);\n\n-- \u5275\u5EFA\u7D22\u5F15\nCREATE INDEX IF NOT EXISTS idx_synced_articles_slug ON synced_articles(slug);\nCREATE INDEX IF NOT EXISTS idx_synced_articles_source_id ON synced_articles(source_id);\nCREATE INDEX IF NOT EXISTS idx_synced_articles_language ON synced_articles(language);\nCREATE INDEX IF NOT EXISTS idx_synced_articles_status ON synced_articles(sync_status);\nCREATE INDEX IF NOT EXISTS idx_synced_articles_published_at ON synced_articles(published_at DESC);\nCREATE INDEX IF NOT EXISTS idx_synced_articles_categories ON synced_articles USING GIN(categories);\nCREATE INDEX IF NOT EXISTS idx_synced_articles_tags ON synced_articles USING GIN(tags);\n\n-- \u5275\u5EFA updated_at \u89F8\u767C\u5668\nCREATE OR REPLACE FUNCTION update_synced_articles_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.updated_at = NOW();\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nDROP TRIGGER IF EXISTS trigger_synced_articles_updated_at ON synced_articles;\nCREATE TRIGGER trigger_synced_articles_updated_at\n  BEFORE UPDATE ON synced_articles\n  FOR EACH ROW\n  EXECUTE FUNCTION update_synced_articles_updated_at();\n\n-- RLS \u653F\u7B56\uFF08\u53EF\u9078\uFF1A\u6839\u64DA\u9700\u6C42\u8ABF\u6574\uFF09\nALTER TABLE synced_articles ENABLE ROW LEVEL SECURITY;\n\n-- \u516C\u958B\u8B80\u53D6\uFF1A\u6240\u6709\u4EBA\u53EF\u4EE5\u67E5\u770B\u5DF2\u767C\u5E03\u7684\u6587\u7AE0\nCREATE POLICY \"Public can read active articles\" ON synced_articles\n  FOR SELECT\n  USING (sync_status = 'active');\n\n-- \u6DFB\u52A0\u8A3B\u89E3\nCOMMENT ON TABLE synced_articles IS '\u540C\u6B65\u81EA 1waySEO \u7684\u6587\u7AE0';\nCOMMENT ON COLUMN synced_articles.source_id IS '1waySEO \u7684\u6587\u7AE0 ID';\nCOMMENT ON COLUMN synced_articles.sync_status IS '\u540C\u6B65\u72C0\u614B\uFF1Aactive\uFF08\u6709\u6548\uFF09\u3001deleted\uFF08\u5DF2\u522A\u9664\uFF09';\n";
/**
 * 取得 Migration SQL
 */
declare function getMigrationSQL(): string;

export { SYNCED_ARTICLES_MIGRATION, getMigrationSQL };
