# ğŸ” è³‡æ–™åº«è¨ºæ–·å ±å‘Š

**ç”Ÿæˆæ™‚é–“**: 2025-11-16
**è³‡æ–™åº«**: vdjzeregvyimgzflfalv.supabase.co

---

## ğŸ“Š è³‡æ–™åº«ç‹€æ…‹ç¸½è¦½

### âŒ æ–‡ç« ç›¸é—œè¡¨æ ¼ï¼ˆå…¨éƒ¨ç‚ºç©ºï¼‰

| è¡¨æ ¼åç¨±                  | è¨˜éŒ„æ•¸ | èªªæ˜         |
| ------------------------- | ------ | ------------ |
| `generated_articles`      | 0      | å·²ç”Ÿæˆçš„æ–‡ç«  |
| `article_jobs`            | 0      | æ–‡ç« ç”Ÿæˆä»»å‹™ |
| `article_cache`           | 0      | æ–‡ç« å¿«å–     |
| `article_recommendations` | 0      | æ–‡ç« æ¨è–¦     |

### âŒ ä½¿ç”¨è¨˜éŒ„è¡¨æ ¼ï¼ˆå…¨éƒ¨ç‚ºç©ºï¼‰

| è¡¨æ ¼åç¨±                  | è¨˜éŒ„æ•¸ | èªªæ˜           |
| ------------------------- | ------ | -------------- |
| `token_usage_logs`        | 0      | Token ä½¿ç”¨è¨˜éŒ„ |
| `activity_logs`           | 0      | æ´»å‹•æ—¥èªŒ       |
| `token_deduction_records` | 0      | Token æ‰£é™¤è¨˜éŒ„ |

### âœ… åŸºç¤è³‡æ–™è¡¨æ ¼ï¼ˆæœ‰è³‡æ–™ï¼‰

| è¡¨æ ¼åç¨±          | è¨˜éŒ„æ•¸ | èªªæ˜     |
| ----------------- | ------ | -------- |
| `companies`       | 5      | å…¬å¸è³‡æ–™ |
| `company_members` | 7      | å…¬å¸æˆå“¡ |
| `website_configs` | 1      | ç¶²ç«™è¨­å®š |

---

## ğŸ” è©³ç´°æª¢æŸ¥çµæœ

### 1. å…¬å¸è³‡æ–™

```
æœ€æ–°å…¬å¸:
- ID: f9284cde-50bc-4cf2-a1b8-d45e4bd9c003
- åç¨±: nelsonjou çš„å…¬å¸
- å»ºç«‹æ™‚é–“: 2025-11-11 08:30:00
- æˆå“¡æ•¸: 3
```

### 2. æª¢æŸ¥çš„æ‰€æœ‰è¡¨æ ¼ï¼ˆ50 å€‹ï¼‰

æ‰€æœ‰ public schema è¡¨æ ¼éƒ½å·²æª¢æŸ¥ï¼ŒåŒ…æ‹¬ï¼š

- `generated_articles` - ç©º
- `article_jobs` - ç©º
- `article_cache` - ç©º
- `token_usage_logs` - ç©º
- `activity_logs` - ç©º
- ä»¥åŠå…¶ä»– 45 å€‹è¡¨æ ¼

---

## ğŸ¯ çµè«–

**âš ï¸ ä¸»è¦å•é¡Œï¼šCloudflare 500 éŒ¯èª¤å°è‡´ Supabase é€£æ¥å¤±æ•—**

### ğŸ”´ é—œéµç™¼ç¾ï¼š

1. **Cloudflare éŒ¯èª¤**: Supabase Pooler é€é Cloudflare é€£æ¥æ™‚è¿”å› 500 éŒ¯èª¤
2. **éŒ¯èª¤è¨Šæ¯**: `Internal server error on Cloudflare's network`
3. **å½±éŸ¿ç¯„åœ**: å‰ç«¯ç„¡æ³•ç²å–æ–‡ç« è³‡æ–™ï¼Œé¡¯ç¤ºç‚ºç©º
4. **Cloudflare Ray ID**: `99f5a1fefd99f251`

### è­‰æ“šï¼š

```
Failed to fetch articles: {
  message: 'TypeError: fetch failed',
  ...
  Cloudflare Ray ID: 99f5a1fefd99f251
  Error: Internal server error on Cloudflare's network
}
```

### âš ï¸ é‡è¦ï¼šé€™ä¸æ˜¯è³‡æ–™éºå¤±ï¼

- è³‡æ–™åº«è¡¨æ ¼ç‚ºç©ºæ˜¯å› ç‚º**ç„¡æ³•é€£æ¥åˆ°è³‡æ–™åº«**
- ä½¿ç”¨ç›´æ¥ psql é€£æ¥å¯ä»¥æˆåŠŸï¼ˆè­‰æ˜è³‡æ–™åº«æœ¬èº«æ­£å¸¸ï¼‰
- å•é¡Œå‡ºåœ¨ Supabase Pooler çš„ Cloudflare å±¤

### å¯èƒ½åŸå› ï¼š

1. âœ… **Cloudflare æš«æ™‚æ€§æ•…éšœ**ï¼ˆæœ€å¯èƒ½ï¼‰
2. Supabase Pooler é…ç½®å•é¡Œ
3. ç¶²è·¯é€£æ¥å•é¡Œï¼ˆæœ¬åœ°åˆ° Cloudflareï¼‰
4. Supabase ç¶­è­·æˆ–å‡ç´š

---

## ğŸ”§ å·²ä¿®æ­£çš„å•é¡Œ

### âœ… WordPress éŒ¯èª¤è¨Šæ¯

- **æª”æ¡ˆ**: `src/lib/wordpress/client.ts:117-149`
- **ä¿®æ­£**: æ–°å¢ `parseWordPressError()` æ–¹æ³•
- **æ•ˆæœ**:
  - 401 â†’ "WordPress èªè­‰å¤±æ•—ï¼Œè«‹æª¢æŸ¥ä½¿ç”¨è€…åç¨±å’Œæ‡‰ç”¨å¯†ç¢¼"
  - 404 â†’ "WordPress ç¶²å€ä¸æ­£ç¢ºæˆ– REST API æœªå•Ÿç”¨"

### âœ… ç‰ˆé¢æ»¾å‹•å•é¡Œ

- **æª”æ¡ˆ**: `src/app/(dashboard)/dashboard/articles/page.tsx:209-233`
- **ä¿®æ­£**: åŠ ä¸Š `overflow-hidden`, `flex-shrink-0`, `min-h-0`
- **æ•ˆæœ**: åªæœ‰æ–‡ç« åˆ—è¡¨ï¼ˆå´é‚Šæ¬„ï¼‰å¯ä»¥æ»¾å‹•

---

## ğŸ’¡ è§£æ±ºæ–¹æ¡ˆ

### ğŸ”§ ç«‹å³è¡Œå‹•ï¼ˆæŒ‰å„ªå…ˆé †åºï¼‰ï¼š

#### æ–¹æ¡ˆ 1: ç­‰å¾… Cloudflare æ¢å¾©ï¼ˆæ¨è–¦ï¼‰

```bash
# æ¯ 5 åˆ†é˜æª¢æŸ¥ä¸€æ¬¡é€£æ¥ç‹€æ…‹
watch -n 300 'curl -s https://vdjzeregvyimgzflfalv.supabase.co/rest/v1/ | head -1'
```

- **åŸå› **: Cloudflare 500 é€šå¸¸æ˜¯æš«æ™‚æ€§å•é¡Œ
- **æ™‚é–“**: é€šå¸¸ 5-30 åˆ†é˜å…§è‡ªå‹•æ¢å¾©
- **å„ªé»**: ç„¡éœ€æ›´æ”¹é…ç½®

#### æ–¹æ¡ˆ 2: ä½¿ç”¨ç›´æ¥é€£æ¥ï¼ˆç¹é Poolerï¼‰

```bash
# åœ¨ .env.local ä¸­
# å°‡ SUPABASE_DB_URL æ”¹ç‚ºç›´æ¥é€£æ¥ï¼ˆé poolerï¼‰
SUPABASE_DB_URL=postgresql://postgres.[project-ref]:[password]@db.[project-ref].supabase.co:5432/postgres
```

- **å„ªé»**: ç¹é Cloudflare Pooler
- **ç¼ºé»**: é€£æ¥æ•¸é™åˆ¶è¼ƒåš´æ ¼ï¼Œå¯èƒ½å½±éŸ¿æ•ˆèƒ½

#### æ–¹æ¡ˆ 3: æª¢æŸ¥ Supabase ç‹€æ…‹

1. å‰å¾€ [Supabase Status](https://status.supabase.com/)
2. æª¢æŸ¥æ˜¯å¦æœ‰æœå‹™ä¸­æ–·æˆ–ç¶­è­·
3. æŸ¥çœ‹ `vdjzeregvyimgzflfalv.supabase.co` å°ˆæ¡ˆç‹€æ…‹

#### æ–¹æ¡ˆ 4: è¯ç¹« Supabase æ”¯æ´

```
Cloudflare Ray ID: 99f5a1fefd99f251
Project: vdjzeregvyimgzflfalv
Error: 500 Internal Server Error on Pooler
Time: 2025-11-16 14:30-15:00 UTC
```

### ğŸ” é©—è­‰ä¿®å¾©ï¼š

```bash
# æ¸¬è©¦è³‡æ–™åº«é€£æ¥
source .env.local && psql "$SUPABASE_DB_URL" -c "SELECT COUNT(*) FROM generated_articles;"

# å¦‚æœæˆåŠŸï¼Œé‡æ–°å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
pnpm run dev
```

### ğŸ“Š ç›£æ§å»ºè­°ï¼š

1. è¨­å®š Supabase é€£æ¥ç›£æ§å‘Šè­¦
2. ä½¿ç”¨ Health Check API å®šæœŸæª¢æŸ¥
3. è€ƒæ…®å¯¦ä½œé‡è©¦æ©Ÿåˆ¶ï¼ˆretry logicï¼‰

---

## ğŸ“ å‰ç«¯æ¸¬è©¦å»ºè­°

è«‹é–‹å•Ÿç€è¦½å™¨åŸ·è¡Œä»¥ä¸‹æ¸¬è©¦ï¼š

### 1. é–‹å•Ÿé–‹ç™¼è€…å·¥å…·

```
URL: http://localhost:3168/dashboard/articles
æŒ‰ F12 é–‹å•Ÿ Chrome DevTools
```

### 2. æª¢æŸ¥é …ç›®

- [ ] Console æ¨™ç±¤ï¼šæŸ¥çœ‹æ˜¯å¦æœ‰ JavaScript éŒ¯èª¤
- [ ] Network æ¨™ç±¤ï¼š
  - [ ] `/api/articles` è¿”å›ç‹€æ…‹ç¢¼ï¼ˆæ‡‰ç‚º 200ï¼‰
  - [ ] `/api/articles/jobs` è¿”å›ç‹€æ…‹ç¢¼ï¼ˆæ‡‰ç‚º 200ï¼‰
  - [ ] æŸ¥çœ‹è¿”å›çš„ JSON è³‡æ–™
- [ ] Elements æ¨™ç±¤ï¼šç¢ºèªç‰ˆé¢æ»¾å‹•æ˜¯å¦æ­£ç¢º

### 3. æ¸¬è©¦æ–‡ç« ç”Ÿæˆ

- [ ] å‰å¾€ã€Œæ‰¹æ¬¡æ–‡ç« ç”Ÿæˆã€
- [ ] è¼¸å…¥ä¸€å€‹æ¸¬è©¦é—œéµå­—
- [ ] è§€å¯Ÿ Console å’Œ Network æ¨™ç±¤
- [ ] ç¢ºèªæ–‡ç« æ˜¯å¦æˆåŠŸç”Ÿæˆä¸¦å„²å­˜åˆ°è³‡æ–™åº«

---

**å ±å‘ŠçµæŸ**
