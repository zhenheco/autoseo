# 實作任務清單

## 診斷階段

- [x] 檢查 Console 日誌確認 `handleClearJobs` 實際執行情況
- [x] 驗證前端 `jobs.length` 是否正確反映 pending 任務數量
- [x] 檢查 API 回應中的 `deletedCount` 與實際資料庫刪除數量是否一致
- [x] 確認資料庫中是否有孤立的 pending 任務（無對應 company_id 或 user_id）

## 修復階段

- [x] 修正前端：確保批次刪除確認訊息顯示正確的任務數量
- [x] 增強 API：在刪除前先查詢並記錄所有符合條件的任務
- [x] 增強 API：在刪除後驗證實際刪除的任務數量
- [x] 增強錯誤處理：當刪除數量為 0 時提供更詳細的診斷訊息
- [x] 修正前端：刪除成功後立即重新載入資料，確保介面更新

## 驗證階段

- [x] 測試：建立多個 pending 狀態的測試任務
- [x] 測試：執行批次刪除並驗證所有任務都被清除
- [x] 測試：驗證刪除後介面不再顯示任何 pending 任務
- [x] 測試：驗證單篇文章刪除功能仍然正常運作
- [x] 測試：驗證錯誤情況下的錯誤訊息是否清晰

## 文件更新

- [x] 更新 ISSUELOG.md 記錄此問題和解決方案
- [x] 如有需要，更新相關 API 文件
