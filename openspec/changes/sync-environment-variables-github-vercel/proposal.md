# Proposal: ç’°å¢ƒè®Šæ•¸åŒæ­¥èˆ‡é©—è­‰ç³»çµ± (Vercel â†” GitHub Secrets)

## ğŸ¯ ç›®æ¨™

å»ºç«‹è‡ªå‹•åŒ–ç’°å¢ƒè®Šæ•¸åŒæ­¥æ©Ÿåˆ¶ï¼Œç¢ºä¿ Vercel å’Œ GitHub Actions çš„ç’°å¢ƒè®Šæ•¸ä¸€è‡´ä¸”æ ¼å¼æ­£ç¢ºï¼Œè§£æ±ºç•¶å‰æ–‡ç« ç”Ÿæˆå¤±æ•—çš„æ ¸å¿ƒå•é¡Œã€‚

## ğŸ“‹ å•é¡Œç¾ç‹€

### ç•¶å‰å•é¡Œ

1. **ç’°å¢ƒè®Šæ•¸åŒ…å«æ›è¡Œç¬¦**
   - GitHub Secrets ä¸­çš„æ‰€æœ‰ç’°å¢ƒè®Šæ•¸éƒ½åŒ…å«æ›è¡Œç¬¦ (`\n`)
   - å°è‡´ GitHub Actions workflow ç’°å¢ƒè®Šæ•¸é©—è­‰æ­¥é©Ÿå¤±æ•—
   - éŒ¯èª¤è¨Šæ¯ï¼š`âŒ éŒ¯èª¤: XXXX åŒ…å«æ›è¡Œç¬¦`

2. **ç’°å¢ƒè®Šæ•¸ç¼ºå¤±æˆ–ä¸ä¸€è‡´**
   - Vercel æœ‰ 25+ å€‹ç’°å¢ƒè®Šæ•¸
   - GitHub Secrets ç¼ºå°‘é—œéµè®Šæ•¸ï¼ˆå¦‚ `ANTHROPIC_API_KEY`ï¼‰
   - å…©é‚Šçš„å€¼å¯èƒ½ä¸åŒæ­¥

3. **æ–‡ç« ç”ŸæˆæŒçºŒå¤±æ•—**
   - R2 åœ–ç‰‡ä¸Šå‚³å¤±æ•—ï¼ˆç’°å¢ƒè®Šæ•¸æ ¼å¼å•é¡Œï¼‰
   - Multi-Agent æ¶æ§‹ç„¡æ³•æ­£å¸¸é‹ä½œ
   - è³‡æ–™åº«é€£æ¥é–“æ­‡æ€§å¤±æ•—

### æ ¹æœ¬åŸå› åˆ†æ

1. **æ‰‹å‹•è¨­å®šéŒ¯èª¤**ï¼šä½¿ç”¨ `gh secret set` æ™‚è¤‡è£½äº†å¤šé¤˜çš„æ›è¡Œç¬¦è™Ÿ
2. **ç¼ºä¹é©—è­‰æ©Ÿåˆ¶**ï¼šç„¡æ³•è‡ªå‹•æª¢æ¸¬ç’°å¢ƒè®Šæ•¸æ ¼å¼éŒ¯èª¤
3. **åŒæ­¥å›°é›£**ï¼šVercel å’Œ GitHub éœ€è¦æ‰‹å‹•é€ä¸€è¨­å®š

## ğŸ”§ è§£æ±ºæ–¹æ¡ˆ

### éšæ®µä¸€ï¼šç·Šæ€¥ä¿®å¾©ï¼ˆç«‹å³åŸ·è¡Œï¼‰

**ç›®æ¨™**ï¼šå¿«é€Ÿä¿®å¾©æ‰€æœ‰ç’°å¢ƒè®Šæ•¸çš„æ›è¡Œç¬¦å•é¡Œ

**åŸ·è¡Œæ­¥é©Ÿ**ï¼š

```bash
# 1. ä½¿ç”¨ Vercel CLI ç²å–æ­£ç¢ºçš„ç’°å¢ƒè®Šæ•¸
vercel env pull .env.production --scope acejou27s-projects --environment production --yes

# 2. ä½¿ç”¨æ”¹é€²çš„åŒæ­¥è…³æœ¬
bash scripts/sync-secrets-vercel-to-github.sh

# 3. ç«‹å³è§¸ç™¼æ¸¬è©¦ workflow é©—è­‰
gh workflow run article-generation.yml --ref main
```

**é æœŸçµæœ**ï¼š

- âœ… æ‰€æœ‰ç’°å¢ƒè®Šæ•¸æˆåŠŸåŒæ­¥åˆ° GitHub
- âœ… ç’°å¢ƒè®Šæ•¸é©—è­‰æ­¥é©Ÿé€šé
- âœ… æ–‡ç« ç”Ÿæˆæ¸¬è©¦æˆåŠŸ

### éšæ®µäºŒï¼šè‡ªå‹•åŒ–åŒæ­¥ç³»çµ±

**åŠŸèƒ½ 1ï¼šé›™å‘åŒæ­¥è…³æœ¬**

å»ºç«‹ `scripts/sync-secrets.sh`ï¼Œæ”¯æ´ï¼š

- Vercel â†’ GitHub Secrets
- GitHub Secrets â†’ Vercel
- é›™å‘é©—è­‰å’Œè¡çªæª¢æ¸¬

**åŠŸèƒ½ 2ï¼šCI/CD æ•´åˆ**

æ–°å¢ `.github/workflows/sync-env-vars.yml`ï¼š

- å®šæœŸæª¢æŸ¥ç’°å¢ƒè®Šæ•¸ä¸€è‡´æ€§ï¼ˆæ¯æ—¥ï¼‰
- ç™¼ç¾ä¸ä¸€è‡´æ™‚ç™¼é€é€šçŸ¥
- å¯é¸ï¼šè‡ªå‹•åŒæ­¥ï¼ˆéœ€è¦æ‰‹å‹•æ‰¹å‡†ï¼‰

**åŠŸèƒ½ 3ï¼šç’°å¢ƒè®Šæ•¸é©—è­‰å·¥å…·**

å»ºç«‹ `scripts/validate-env-vars.ts`ï¼š

- æª¢æ¸¬æ›è¡Œç¬¦ã€ç‰¹æ®Šå­—å…ƒ
- é©—è­‰å¿…è¦è®Šæ•¸æ˜¯å¦å­˜åœ¨
- æª¢æŸ¥è®Šæ•¸å€¼æ ¼å¼ï¼ˆURLã€API Key ç­‰ï¼‰

### éšæ®µä¸‰ï¼šæ¸¬è©¦èˆ‡ç›£æ§

**æ¸¬è©¦å¥—ä»¶**

å»ºç«‹å®Œæ•´çš„ç’°å¢ƒè®Šæ•¸æ¸¬è©¦ï¼š

1. å–®å…ƒæ¸¬è©¦ï¼šç’°å¢ƒè®Šæ•¸è¼‰å…¥å’Œé©—è­‰
2. æ•´åˆæ¸¬è©¦ï¼šGitHub Actions workflow æ¸¬è©¦
3. ç«¯åˆ°ç«¯æ¸¬è©¦ï¼šæ–‡ç« ç”Ÿæˆå®Œæ•´æµç¨‹

**ç›£æ§ Dashboard**

å»ºç«‹ç›£æ§é é¢é¡¯ç¤ºï¼š

- ç’°å¢ƒè®Šæ•¸åŒæ­¥ç‹€æ…‹
- æœ€å¾ŒåŒæ­¥æ™‚é–“
- ä¸ä¸€è‡´çš„è®Šæ•¸åˆ—è¡¨
- æ¸¬è©¦ workflow åŸ·è¡Œç‹€æ…‹

## ğŸ“Š é æœŸæˆæœ

### çŸ­æœŸç›®æ¨™ï¼ˆ1 å¤©å…§ï¼‰

- [ ] æ‰€æœ‰ç’°å¢ƒè®Šæ•¸æ ¼å¼æ­£ç¢º
- [ ] GitHub Actions workflow é©—è­‰é€šé
- [ ] æ–‡ç« ç”Ÿæˆæ¸¬è©¦æˆåŠŸï¼ˆè‡³å°‘ 3 æ¬¡æˆåŠŸï¼‰

### ä¸­æœŸç›®æ¨™ï¼ˆ1 é€±å…§ï¼‰

- [ ] è‡ªå‹•åŒ–åŒæ­¥è…³æœ¬å®Œæˆä¸¦æ¸¬è©¦
- [ ] CI/CD ç’°å¢ƒè®Šæ•¸æª¢æŸ¥å·²æ•´åˆ
- [ ] æ–‡ç« ç”ŸæˆæˆåŠŸç‡é”åˆ° 95% ä»¥ä¸Š

### é•·æœŸç›®æ¨™ï¼ˆ1 å€‹æœˆå…§ï¼‰

- [ ] å®Œæ•´çš„ç’°å¢ƒè®Šæ•¸ç®¡ç†ç³»çµ±
- [ ] è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡ > 80%
- [ ] é›¶ç’°å¢ƒè®Šæ•¸ç›¸é—œå¤±æ•—

## ğŸ”— ç›¸é—œè³‡æº

- [Vercel Environment Variables Docs](https://vercel.com/docs/projects/environment-variables)
- [GitHub Secrets API](https://docs.github.com/en/rest/actions/secrets)
- [GitHub CLI Reference](https://cli.github.com/manual/gh_secret)

## ğŸ“ å‚™è¨»

- **ç·Šæ€¥ç¨‹åº¦**ï¼šğŸ”´ é«˜ï¼ˆå½±éŸ¿ç”Ÿç”¢ç’°å¢ƒï¼‰
- **é ä¼°å·¥æ™‚**ï¼š4-6 å°æ™‚
- **é¢¨éšªè©•ä¼°**ï¼šä½ï¼ˆä¸»è¦æ˜¯é…ç½®è®Šæ›´ï¼‰
- **å›æ»¾æ–¹æ¡ˆ**ï¼šä¿ç•™èˆŠçš„ GitHub Secrets å‚™ä»½
