# Proposal: enhance-article-generation-pipeline

## Summary

é‡æ§‹æ–‡ç« ç”Ÿæˆ pipelineï¼Œè§£æ±ºå…§æ–‡å“ç‰Œè²éŸ³ä¸ä¸€è‡´ã€å…§æ–‡èˆ‡æ¨™é¡Œä¸»é¡Œä¸ç¬¦ã€Perplexity æœªå……åˆ†åˆ©ç”¨ç­‰æ ¸å¿ƒå•é¡Œã€‚

## Problem Statement

ç›®å‰æ–‡ç« ç”Ÿæˆç³»çµ±å­˜åœ¨ä»¥ä¸‹é—œéµå•é¡Œï¼š

| å•é¡Œ                      | æ ¹æœ¬åŸå›                                      | å½±éŸ¿                                         |
| ------------------------- | -------------------------------------------- | -------------------------------------------- |
| å…§æ–‡å“ç‰Œè²éŸ³ä¸ä¸€è‡´        | å¯«ä½œ Agents æ²’æœ‰æ”¶åˆ°å®Œæ•´çš„å“ç‰Œè²éŸ³ä¸Šä¸‹æ–‡     | æ–‡ç« èªèª¿é¢¨æ ¼ä¸ç¬¦åˆå“ç‰Œå®šä½                   |
| å…§æ–‡èˆ‡æ¨™é¡Œä¸»é¡Œä¸ç¬¦        | SectionAgent æ²’æœ‰æ”¶åˆ°å®Œæ•´çš„ä¸»é¡Œä¸Šä¸‹æ–‡        | ä¾‹ï¼šæ¨™é¡Œã€Œç•¢æ¥­å…¸ç¦®éŒ„å½±ã€ä½†å…§æ–‡å¯«ç¨‹å¼ç›¸é—œå…§å®¹ |
| å¯«ä½œè¨ˆåŠƒä¸å¤ è©³ç´°          | StrategyAgent è¼¸å‡ºçµæ§‹éæ–¼ç°¡å–®               | ç¼ºå°‘ç”¨æˆ¶æœŸæœ›çš„ç­–ç•¥ç´°ç¯€                       |
| Perplexity åªç”¨æ–¼å¤–éƒ¨å¼•ç”¨ | ResearchAgent æ²’æœ‰ç”¨ Perplexity é€²è¡Œæ·±åº¦ç ”ç©¶ | ç¼ºå°‘æœ€æ–°è¶¨å‹¢ã€çµ±è¨ˆæ•¸æ“šã€å°ˆå®¶è¦‹è§£             |

## Proposed Solution

### Phase 1: å¢å¼· ResearchAgent - Perplexity æ·±åº¦ç ”ç©¶æ•´åˆ

- æ–°å¢ä¸‰ç¨® Perplexity æŸ¥è©¢ï¼šæœ€æ–°è¶¨å‹¢ã€ç”¨æˆ¶å•é¡Œã€æ¬Šå¨æ•¸æ“š
- æ“´å±• `ResearchOutput` é¡å‹åŠ å…¥ `deepResearch` æ¬„ä½

### Phase 2: ä¿®æ”¹ StrategyAgent - æ¨™é¡Œå„ªåŒ–

- èª¿æ•´ temperature å¾ 0.3 åˆ° 0.6 å¢åŠ å‰µæ„
- æ ¹æ“šèªç³»èª¿æ•´æ¨™é¡Œé•·åº¦è¦æ±‚

### Phase 3: æ–°å¢ ContentPlanAgent

- æ•´åˆ research + strategy + competitor analysis
- ç”¢ç”Ÿè©³ç´°å¯«ä½œè¨ˆåŠƒ JSONï¼ˆåŒ…å« contentStrategyã€detailedOutlineã€seoOptimizationã€localizationï¼‰
- é¸æ“‡æ€§ä½¿ç”¨ç‰¹æ®Šå€å¡Šï¼ˆğŸ’¡å°ˆå®¶æç¤ºã€ğŸ†æœ¬åœ°å„ªå‹¢ã€âš ï¸å°ˆå®¶è­¦å‘Šï¼‰

### Phase 4: æ›´æ–°å¯«ä½œ Agents - ä¸»é¡Œä¸€è‡´æ€§èˆ‡å“ç‰Œè²éŸ³èå…¥

- æ–°å¢ `ContentContext` é¡å‹ç¢ºä¿ä¸»é¡Œä¸Šä¸‹æ–‡èˆ‡å“ç‰Œè²éŸ³å‚³é
- ä¿®æ”¹ SectionAgentã€IntroductionAgentã€ConclusionAgentã€QAAgent çš„ prompt
- åŠ å…¥ä¸»é¡Œå°é½Šç´„æŸ
- å°‡å“ç‰Œè²éŸ³ï¼ˆèªèª¿ã€ç›®æ¨™å—çœ¾ã€é¢¨æ ¼ï¼‰èå…¥å„ Agent çš„å…§æ–‡ç”Ÿæˆ

### Phase 5: æ›´æ–° Orchestrator

- æ•´åˆ ContentPlanAgent åˆ°ç”Ÿæˆæµç¨‹
- æ§‹å»ºä¸¦å‚³é ContentContext çµ¦æ‰€æœ‰å¯«ä½œ Agent

## Success Criteria

1. ç”Ÿæˆçš„å…§æ–‡ç¬¦åˆå“ç‰Œè²éŸ³é…ç½®ï¼ˆèªèª¿ã€é¢¨æ ¼ã€ç›®æ¨™å—çœ¾ï¼‰
2. å…§æ–‡ä¸»é¡Œèˆ‡æ¨™é¡Œå®Œå…¨ä¸€è‡´
3. æ–‡ç« åŒ…å«ä¾†è‡ª Perplexity çš„æœ€æ–°ç ”ç©¶æ´å¯Ÿ
4. å¯«ä½œè¨ˆåŠƒçµæ§‹ç¬¦åˆç”¨æˆ¶æœŸæœ›çš„ JSON æ ¼å¼

## Scope

### In Scope

- ResearchAgent Perplexity æ·±åº¦æ•´åˆ
- StrategyAgent æ¨™é¡Œå„ªåŒ–
- æ–°å¢ ContentPlanAgent
- å¯«ä½œ Agents ä¸»é¡Œä¸Šä¸‹æ–‡èˆ‡å“ç‰Œè²éŸ³å‚³é
- Orchestrator æµç¨‹æ•´åˆ

### Out of Scope

- å‰ç«¯ UI è®Šæ›´
- è³‡æ–™åº« schema è®Šæ›´
- ç¬¬ä¸‰æ–¹ API æ•´åˆï¼ˆé™¤ Perplexity å¤–ï¼‰

## Risks and Mitigations

| é¢¨éšª                      | å½±éŸ¿                | ç·©è§£æªæ–½                                        |
| ------------------------- | ------------------- | ----------------------------------------------- |
| Perplexity API èª¿ç”¨å¢åŠ    | Token æˆæœ¬ä¸Šå‡      | å¯¦ä½œå¿«å–æ©Ÿåˆ¶ï¼Œç›¸åŒé—œéµå­— 24 å°æ™‚å…§ä¸é‡è¤‡æŸ¥è©¢    |
| æ–°å¢ Agent å¢åŠ å»¶é²       | æ–‡ç« ç”Ÿæˆæ™‚é–“è®Šé•·    | ContentPlanAgent ä½¿ç”¨è¼ƒå¿«çš„æ¨¡å‹å’Œè¼ƒä½ maxTokens |
| å¯«ä½œ Agent æ”¹å‹•å½±éŸ¿ç¯„åœå¤§ | å¯èƒ½å¼•å…¥ regression | ä¿æŒå‘å¾Œå…¼å®¹ï¼ŒèˆŠæµç¨‹ä½œç‚º fallback               |

## Timeline

| éšæ®µ                      | é ä¼°å·¥æ™‚    |
| ------------------------- | ----------- |
| Phase 1: ResearchAgent    | 2 å°æ™‚      |
| Phase 2: StrategyAgent    | 2 å°æ™‚      |
| Phase 3: ContentPlanAgent | 3 å°æ™‚      |
| Phase 4: å¯«ä½œ Agents      | 2 å°æ™‚      |
| Phase 5: Orchestrator     | 2 å°æ™‚      |
| æ¸¬è©¦é©—è­‰                  | 2 å°æ™‚      |
| **ç¸½è¨ˆ**                  | **13 å°æ™‚** |
